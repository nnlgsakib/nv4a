{"ast":null,"code":"import _slicedToArray from\"/root/experiment/nova-explorer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{CircularProgress}from\"@material-ui/core\";import*as React from\"react\";import{useBlockNumber}from\"../helpers\";import BlockList from\"./BlockList\";import useEthRPCStore from\"../stores/useEthRPCStore\";import{useParams}from\"react-router-dom\";export default function NodeView(props){var _useEthRPCStore=useEthRPCStore(),_useEthRPCStore2=_slicedToArray(_useEthRPCStore,1),erpc=_useEthRPCStore2[0];var _useBlockNumber=useBlockNumber(erpc),_useBlockNumber2=_slicedToArray(_useBlockNumber,1),blockNumber=_useBlockNumber2[0];var urlParams=useParams();var blockNum=blockNumber;if(urlParams&&urlParams.number!==undefined){try{blockNum=parseInt(urlParams.number,10);}catch(e){console.error(\"Unable to parse block number from URL\");}}React.useEffect(function(){if(blockNum===undefined||blockNumber===undefined){return;}if(blockNum>blockNumber){props.history.push(\"/blocks/\".concat(blockNumber));}if(blockNum<0){props.history.push(\"/blocks/0\");}},[blockNumber,blockNum,props.history]);if(blockNumber===undefined||blockNum>blockNumber){return/*#__PURE__*/React.createElement(CircularProgress,null);}return/*#__PURE__*/React.createElement(BlockList,{from:Math.max(blockNum-14,0),to:blockNum,disablePrev:blockNum>=blockNumber,disableNext:blockNum===0,onPrev:function onPrev(){var newQuery=blockNum+15;props.history.push(\"/blocks/\".concat(newQuery));},onNext:function onNext(){var newQuery=Math.max(blockNum-15,0);props.history.push(\"/blocks/\".concat(newQuery));}});}","map":{"version":3,"names":["CircularProgress","React","useBlockNumber","BlockList","useEthRPCStore","useParams","NodeView","props","_useEthRPCStore","_useEthRPCStore2","_slicedToArray","erpc","_useBlockNumber","_useBlockNumber2","blockNumber","urlParams","blockNum","number","undefined","parseInt","e","console","error","useEffect","history","push","concat","createElement","from","Math","max","to","disablePrev","disableNext","onPrev","newQuery","onNext"],"sources":["/root/experiment/nova-explorer/src/containers/NodeView.tsx"],"sourcesContent":["import { CircularProgress } from \"@material-ui/core\";\nimport * as React from \"react\";\nimport { useBlockNumber } from \"../helpers\";\nimport BlockList from \"./BlockList\";\nimport useEthRPCStore from \"../stores/useEthRPCStore\";\nimport { useParams } from \"react-router-dom\";\n\ninterface IUrlParams {\n  number: string | undefined;\n}\n\nexport default function NodeView(props: any) {\n  const [erpc] = useEthRPCStore();\n  const [blockNumber] = useBlockNumber(erpc);\n  const urlParams = useParams<IUrlParams>();\n\n  let blockNum = blockNumber;\n  if (urlParams && urlParams.number !== undefined) {\n    try {\n      blockNum = parseInt(urlParams.number, 10);\n    } catch (e) {\n      console.error(\"Unable to parse block number from URL\");\n    }\n  }\n\n  React.useEffect(() => {\n    if (blockNum === undefined || blockNumber === undefined) {\n      return;\n    }\n    if (blockNum > blockNumber) {\n      props.history.push(`/blocks/${blockNumber}`);\n    }\n    if (blockNum < 0) {\n      props.history.push(\"/blocks/0\");\n    }\n  }, [blockNumber, blockNum, props.history]);\n  if (blockNumber === undefined || blockNum > blockNumber) {\n    return (<CircularProgress />);\n  }\n  return (\n    <BlockList\n      from={Math.max(blockNum - 14, 0)}\n      to={blockNum}\n      disablePrev={blockNum >= blockNumber}\n      disableNext={blockNum === 0}\n      onPrev={() => {\n        const newQuery = blockNum + 15;\n        props.history.push(`/blocks/${newQuery}`);\n      }}\n      onNext={() => {\n        const newQuery = Math.max(blockNum - 15, 0);\n        props.history.push(`/blocks/${newQuery}`);\n      }}\n    />\n  );\n}\n"],"mappings":"qJAAA,OAASA,gBAAgB,KAAQ,mBAAmB,CACpD,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,OAASC,cAAc,KAAQ,YAAY,CAC3C,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,cAAc,KAAM,0BAA0B,CACrD,OAASC,SAAS,KAAQ,kBAAkB,CAM5C,cAAe,SAAS,CAAAC,QAAQA,CAACC,KAAU,CAAE,CAC3C,IAAAC,eAAA,CAAeJ,cAAc,CAAC,CAAC,CAAAK,gBAAA,CAAAC,cAAA,CAAAF,eAAA,IAAxBG,IAAI,CAAAF,gBAAA,IACX,IAAAG,eAAA,CAAsBV,cAAc,CAACS,IAAI,CAAC,CAAAE,gBAAA,CAAAH,cAAA,CAAAE,eAAA,IAAnCE,WAAW,CAAAD,gBAAA,IAClB,GAAM,CAAAE,SAAS,CAAGV,SAAS,CAAa,CAAC,CAEzC,GAAI,CAAAW,QAAQ,CAAGF,WAAW,CAC1B,GAAIC,SAAS,EAAIA,SAAS,CAACE,MAAM,GAAKC,SAAS,CAAE,CAC/C,GAAI,CACFF,QAAQ,CAAGG,QAAQ,CAACJ,SAAS,CAACE,MAAM,CAAE,EAAE,CAAC,CAC3C,CAAE,MAAOG,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,uCAAuC,CAAC,CACxD,CACF,CAEArB,KAAK,CAACsB,SAAS,CAAC,UAAM,CACpB,GAAIP,QAAQ,GAAKE,SAAS,EAAIJ,WAAW,GAAKI,SAAS,CAAE,CACvD,OACF,CACA,GAAIF,QAAQ,CAAGF,WAAW,CAAE,CAC1BP,KAAK,CAACiB,OAAO,CAACC,IAAI,YAAAC,MAAA,CAAYZ,WAAW,CAAE,CAAC,CAC9C,CACA,GAAIE,QAAQ,CAAG,CAAC,CAAE,CAChBT,KAAK,CAACiB,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC,CACjC,CACF,CAAC,CAAE,CAACX,WAAW,CAAEE,QAAQ,CAAET,KAAK,CAACiB,OAAO,CAAC,CAAC,CAC1C,GAAIV,WAAW,GAAKI,SAAS,EAAIF,QAAQ,CAAGF,WAAW,CAAE,CACvD,mBAAQb,KAAA,CAAA0B,aAAA,CAAC3B,gBAAgB,KAAE,CAAC,CAC9B,CACA,mBACEC,KAAA,CAAA0B,aAAA,CAACxB,SAAS,EACRyB,IAAI,CAAEC,IAAI,CAACC,GAAG,CAACd,QAAQ,CAAG,EAAE,CAAE,CAAC,CAAE,CACjCe,EAAE,CAAEf,QAAS,CACbgB,WAAW,CAAEhB,QAAQ,EAAIF,WAAY,CACrCmB,WAAW,CAAEjB,QAAQ,GAAK,CAAE,CAC5BkB,MAAM,CAAE,SAAAA,OAAA,CAAM,CACZ,GAAM,CAAAC,QAAQ,CAAGnB,QAAQ,CAAG,EAAE,CAC9BT,KAAK,CAACiB,OAAO,CAACC,IAAI,YAAAC,MAAA,CAAYS,QAAQ,CAAE,CAAC,CAC3C,CAAE,CACFC,MAAM,CAAE,SAAAA,OAAA,CAAM,CACZ,GAAM,CAAAD,QAAQ,CAAGN,IAAI,CAACC,GAAG,CAACd,QAAQ,CAAG,EAAE,CAAE,CAAC,CAAC,CAC3CT,KAAK,CAACiB,OAAO,CAACC,IAAI,YAAAC,MAAA,CAAYS,QAAQ,CAAE,CAAC,CAC3C,CAAE,CACH,CAAC,CAEN"},"metadata":{},"sourceType":"module"}